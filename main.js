(()=>{"use strict";class e{constructor(e,t,n,s="",i){const o=document.createElement(t);Array.isArray(n)&&n.forEach((e=>o.classList.add(e))),"string"==typeof n&&(o.className=n),o.textContent=s,e&&e.append(o),i&&i.forEach((e=>o.setAttribute(e.name,e.value))),this.node=o}destroy(){this.node.remove()}}class t extends e{constructor(t){super(t,"header","header"),this.wrap=new e(this.node,"div","header__wrap"),this.title=new e(this.wrap.node,"h1","header__wrap__title","Beauty Quiz"),this.author=new e(this.wrap.node,"h2","header__wrap__author","Мария Ващаева")}destroy(){super.destroy()}}class n extends e{constructor(t){super(t,"footer","footer"),this.linkItems=[{name:"gitHub",url:"https://github.com/MaryAnzh",icon:""},{name:"linkedin",url:"https://www.linkedin.com/in/maryia-vashchayeva-511313240/",icon:""}],this.wrap=new e(this.node,"div","footer__wrap"),this.copyWrite=new e(this.wrap.node,"p","footer__wrap__copywrite","©2023, Minsk"),this.myLinks=new e(this.wrap.node,"ul","footer__wrap__links"),this.linkItems.forEach((({name:t,url:n,icon:s})=>{const i=new e(this.myLinks.node,"li","footer__wrap__links__item");new e(i.node,"a","footer__wrap__links__item__link",t,[{name:"href",value:n},{name:"target",value:"_blank"},{name:"rel",value:"noreferrer"}])}))}destroy(){super.destroy()}}var s,i,o;!function(e){e.Next="next",e.Prev="prev"}(s||(s={})),function(e){e.Next="Дальше",e.Prev="Назад",e.Result="Узнать результат"}(i||(i={})),function(e){e.Fist="quiz-buttons__prev-first",e.Base="quiz-buttons__prev"}(o||(o={}));class r extends e{constructor(t){super(t,"div","quiz-buttons"),this.changeButtonsView=(e,t)=>{0!==e?e!==t-1?this.middleButtonsPos():this.lastButtonsPos():this.firstButtonsPos()},this.firstButtonsPos=()=>{this.prev.node.className=o.Fist,this.next.node.textContent=i.Next},this.middleButtonsPos=()=>{this.prev.node.className=o.Base,this.next.node.textContent=i.Next},this.lastButtonsPos=()=>{this.prev.node.className=o.Base,this.next.node.textContent=i.Result},this.prev=new e(this.node,"button",o.Fist,i.Prev,[{name:"id",value:s.Prev}]),this.next=new e(this.node,"button","quiz-buttons__next",i.Next,[{name:"id",value:s.Next}])}destroy(){this.node.onclick=null,super.destroy()}}class d extends e{constructor(t){super(t,"div","round"),this.questionCount=0,this.checkboxesSet=[],this.answerListSet=[],this.addRoundData=(e,t,n,i)=>(this.cleanRoundInfo(t,n),this.addRoundInfo(e,t,n,i),new Promise((e=>{this.buttonsBlock.node.onclick=t=>{const i=this.answerListSet.findIndex((e=>!0===e.checked)),o=t.target;let r="";if(o.id!==s.Next&&o.id!==s.Prev)return s.Next,void console.log("Неверный id");const d=o.id===s.Prev?s.Prev:s.Next;e({direction:d,checkedQuestion:i,currentRound:n})},this.checkboxesSet.forEach(((t,s)=>{t.onchange=()=>{const t=this.answerListSet.findIndex((e=>!0===e.checked));e({questionNum:s,checkedQuestion:t,currentRound:n})}}))}))),this.addRoundInfo=(e,t,n,s)=>{const i=n+1;this.addQuestionNumberText(i,t),this.question.node.textContent=e.question,this.createAnswerList(e.answers,s),this.buttonsBlock.changeButtonsView(n,t)},this.createCheckBox=t=>{[...Array(t).keys()].forEach((t=>{const n=new e(this.sliderCheckboxes.node,"div","round__info__slider-checkboxes__box"),s=new e(n.node,"input","round__info__slider-checkboxes__box__input",null,[{name:"name",value:"box"},{name:"type",value:"radio"},{name:"id",value:`box-${t}`}]),i=(new e(n.node,"label","round__info__slider-checkboxes__box__label",null,[{name:"for",value:`box-${t}`}]),s.node);this.checkboxesSet.push(i)})),this.checkboxesSet[0].checked=!0},this.checkedSliderInput=e=>{this.checkboxesSet[e].checked=!0},this.addQuestionNumberText=(e,t)=>{this.questionNumText.node.textContent=`Вопрос ${e} из ${t}`},this.createAnswerList=(t,n)=>{this.answerList.node.innerHTML="",[...Array(t.length).keys()].forEach((s=>{const i=new e(this.answerList.node,"li","round__info__answer-list__answer"),o=new e(i.node,"input","round__info__answer-list__answer__input",null,[{name:"name",value:"answer"},{name:"type",value:"radio"}]);new e(i.node,"label","round__info__answer-list__answer__label").node.textContent=t[s];const r=o.node;n>-1&&s===n&&(r.checked=!0),this.answerListSet.push(r)}))},this.cleanRoundInfo=(e,t)=>{0===this.checkboxesSet.length?this.createCheckBox(e):this.checkedSliderInput(t),this.answerListSet=[]},this.infWrap=new e(this.node,"div","round__info"),this.sliderCheckboxes=new e(this.infWrap.node,"div","round__info__slider-checkboxes"),this.questionNumText=new e(this.infWrap.node,"p","round__info__question-num-text"),this.question=new e(this.infWrap.node,"p","round__info__question"),this.answerList=new e(this.infWrap.node,"ul","round__info__answer-list"),this.buttonsBlock=new r(this.node)}destroy(){super.destroy(),this.buttonsBlock.destroy(),this.answerListSet.forEach((e=>e.checked=null))}}class a extends e{constructor(e){super(e,"ul","answer-block")}}class h extends e{constructor(t){super(t,"section","quiz"),this.addRoundData=(e,t,n,s)=>{return i=this,o=void 0,d=function*(){return yield this.round.addRoundData(e,t,n,s)},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{a(d.next(e))}catch(e){t(e)}}function s(e){try{a(d.throw(e))}catch(e){t(e)}}function a(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r((function(e){e(i)}))).then(n,s)}a((d=d.apply(i,o||[])).next())}));var i,o,r,d},this.title=new e(this.node,"h2","quiz__title","Онлайн-подбор средств для лица"),this.description=new e(this.node,"p","quiz__description","Пройдите короткий тест и получите список наиболее подходящих для вас косметических продуктов"),this.round=new d(this.node),this.answerBlock=new a(this.node)}destroy(){super.destroy()}}class u extends e{constructor(s){super(s,"div","wrapper"),this.addRoundData=(e,t,n,s)=>this.quiz.addRoundData(e,t,n,s),this.showResult=()=>{this.main.node.textContent="Спасибо за ответы"},this.header=new t(this.node),this.main=new e(this.node,"main","main"),this.footer=new n(this.node),this.quiz=new h(this.main.node)}destroy(){super.destroy()}}var c=function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function r(e){try{a(s.next(e))}catch(e){o(e)}}function d(e){try{a(s.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,d)}a((s=s.apply(e,t||[])).next())}))};const l=new class{constructor(e){this.app=null,this.currentRound=0,this.showApp=()=>c(this,void 0,void 0,(function*(){const e=document.querySelector("body");this.app||(this.app=new u(e));const t=()=>c(this,void 0,void 0,(function*(){const e=yield this.app.addRoundData(this.data[this.currentRound],this.data.length,this.currentRound,this.answersSet[this.currentRound]);if(e.checkedQuestion>-1&&(this.answersSet[e.currentRound]=e.checkedQuestion),this.currentRound!==this.data.length-1||e.direction!==s.Next)return e.direction===s.Next?(this.currentRound+=1,void(yield t())):e.direction===s.Prev?(this.currentRound-=1,void(yield t())):"number"==typeof e.questionNum?(this.currentRound=e.questionNum,void(yield t())):void 0;this.app.showResult()}));t()})),this.createAnswersSet=()=>this.data.map((e=>-1)),this.data=e,this.answersSet=this.createAnswersSet()}}([{question:"Сколько вам лет?",answers:["Нужны средства для ребёнка младше 10 лет","Мне меньше 25 лет","От 25 до 35 лет","От 35 до 45 лет","Мне больше 45 лет"]},{question:"Какой у вас тип кожи?",answers:["Сухая","Нормальная","Комбинированная","Жирная"]},{question:"Беспокоят ли воспаления на лице?",answers:["Да","Нет","Иногда"]}]);window.addEventListener("load",(()=>l.showApp()))})();
//# sourceMappingURL=main.js.map